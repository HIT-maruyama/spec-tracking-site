# Requirements Document

## Introduction

本システムは、仕様駆動開発（Spec-Driven Development）の実践記録を管理・表示する静的Webサイトです。プロジェクトの履歴、CI結果、レビュー指摘、開発効果を構造化されたデータとして記録し、将来の社内標準化を見据えた分類体系で集計・分析を可能にします。GitHub Pagesでの公開を前提とし、バックエンドを持たない完全な静的サイトとして実装されます。

## Glossary

- **System**: 仕様駆動開発管理サイト（Spec Tracking Site）
- **Project**: 仕様駆動開発を適用した個別の開発プロジェクト
- **CI Result**: 継続的インテグレーションの実行結果（合否、メトリクス、ログURL）
- **Review Finding**: 人間によるレビューで発見された指摘事項
- **Effect Metric**: 仕様駆動開発の適用による効果測定値（効率性、品質、人間の手間、引継ぎ正確性）
- **Classification System**: 社内標準化を意識した分類体系（process、doc_type、category、root_cause、severity、status）
- **Static Site**: バックエンドサーバーを持たず、HTML/CSS/JavaScriptのみで動作するWebサイト
- **GitHub Pages**: GitHubが提供する静的サイトホスティングサービス
- **LocalStorage**: ブラウザに内蔵されたクライアントサイドのデータ永続化機構

## 要件

### 要件 1

**ユーザーストーリー:** すべての仕様駆動開発プロジェクトの一覧を表示したい。そうすることで、各プロジェクトの状態と成果を素早く評価できる。

#### 受入基準

1. WHEN ユーザーがサイトにアクセスする THEN システムは全プロジェクトを表示するプロジェクト一覧ページを表示しなければならない
2. WHEN プロジェクト一覧を表示する THEN システムは各プロジェクトのプロジェクト名、フレームワーク種別、日付、最新のCIステータス、レビュー指摘数、タスク完了率を表示しなければならない
3. WHEN ユーザーが一覧内のプロジェクトをクリックする THEN システムはそのプロジェクトの詳細ページに遷移しなければならない
4. システムはlocalStorageからプロジェクトデータを読み込まなければならない
5. システムはlocalStorageに保存されたレビュー指摘を集計し、各プロジェクトのレビュー指摘数を計算しなければならない
6. WHEN localStorageにデータが存在しない THEN システムは適切な空状態メッセージを表示しなければならない

### 要件 2

**ユーザーストーリー:** 各プロジェクトのCI結果を記録・表示したい。そうすることで、自動化された品質メトリクスを時系列で追跡できる。

#### 受入基準

1. WHEN プロジェクト詳細ページでCI結果タブを表示する THEN システムは合否ステータス、lint結果、契約テスト結果、カバレッジ率、SBOMステータス、ログURLを時系列で表示しなければならない
2. WHEN ユーザーがCI結果追加ボタンをクリックする THEN システムは新規CI結果登録フォームを表示しなければならない
3. WHEN ユーザーが新しいCI結果を送信する THEN システムは合否ステータスを含む必須フィールドを検証しなければならない
4. WHEN ユーザーが有効なCI結果を送信する THEN システムはタイムスタンプを自動的に付与し、即座にlocalStorageの該当プロジェクトに追加しなければならない
5. WHEN ユーザーがCI結果を表示する THEN システムは利用可能な場合に外部CIログへのリンクを表示しなければならない
6. WHEN CIデータに数値メトリクスが含まれる THEN システムはそれらのメトリクスを明確にフォーマットして表示しなければならない
7. WHEN ユーザーがCI結果の削除ボタンをクリックする THEN システムは確認ダイアログを表示し、確認後にlocalStorageから削除しなければならない

### 要件 3

**ユーザーストーリー:** レビュー指摘を1件ずつ登録したい。そうすることで、コードレビュー中に発見された具体的な問題を文書化できる。

#### 受入基準

1. WHEN プロジェクト詳細ページでレビュー指摘タブにアクセスする THEN システムは該当プロジェクトのすべての指摘をソート可能でフィルタ可能なテーブルで表示しなければならない
2. WHEN ユーザーがレビュー指摘追加ボタンをクリックする THEN システムは新規指摘を登録するフォームを表示しなければならない
3. WHEN ユーザーが新規指摘を送信する THEN システムはprocess、doc_type、category、root_cause、severity、status、description、document referenceを含むすべての必須フィールドを検証しなければならない
4. WHEN ユーザーが有効な指摘を送信する THEN システムは一意のIDとタイムスタンプを自動的に付与し、即座にlocalStorageに保存し、表示を更新しなければならない
5. WHEN 指摘を保存する THEN システムはプロジェクトIDとともにpath、line numbers、section_idを含むドキュメント参照を含めなければならない
6. システムはすべての分類フィールドに対して事前定義された分類語彙を強制しなければならない
7. WHEN ユーザーが指摘の削除ボタンをクリックする THEN システムは確認ダイアログを表示し、確認後にlocalStorageから削除し、表示を更新しなければならない
8. WHEN ユーザーが指摘の編集ボタンをクリックする THEN システムは既存データが入力された編集フォームを表示しなければならない

### 要件 4

**ユーザーストーリー:** 各プロジェクトの効果メトリクスを記録・表示したい。そうすることで、仕様駆動開発の効率性・品質・人間の手間・前工程からの引継ぎの正確性を測定できる。

#### 受入基準

1. WHEN プロジェクト詳細ページで効果タブを表示する THEN システムは効率性指標、品質指標、人間の手間指標、引継ぎ正確性指標、コメントを表示しなければならない
2. システムは効率性指標として次のフィールドをサポートしなければならない：タスク完了率（パーセンテージ）、平均タスク所要時間（時間）
3. システムは品質指標として次のフィールドをサポートしなければならない：実装前レビュー指摘数、実装後レビュー指摘数、重大度Highの指摘数、CI成功率（パーセンテージ）
4. システムは人間の手間指標として次のフィールドをサポートしなければならない：手動修正回数、レビュー工数（時間）
5. システムは引継ぎ正確性指標として次のフィールドをサポートしなければならない：要件変更回数、設計変更回数、実装時の仕様不明点数
6. WHEN ユーザーが効果メトリクス編集ボタンをクリックする THEN システムは既存データが入力された編集フォームを表示しなければならない
7. WHEN ユーザーが効果メトリクスを送信する THEN システムはパーセンテージフィールドが0-100の範囲内、数値フィールドが0以上であることを検証しなければならない
8. WHEN ユーザーが有効な効果メトリクスを送信する THEN システムは即座にlocalStorageの該当プロジェクトの効果データを更新しなければならない
9. WHEN ユーザーが効果メトリクスを表示する THEN システムはパーセンテージと数値を適切にフォーマットして表示しなければならない
10. システムは効果に関する定性的観察のためのオプションのコメントフィールドをサポートしなければならない
11. WHEN 効果メトリクスが欠落している THEN システムはデータが利用できないことを示すプレースホルダーテキストと編集ボタンを表示しなければならない

### 要件 5

**ユーザーストーリー:** すべてのデータが一貫した分類システムを使用することを望む。そうすることで、複数のプロジェクトにわたって指摘を集計・分析できる。

#### 受入基準

1. システムは次のprocess値を強制しなければならない：planning、design、implementation、testing、documentation
2. システムはドキュメント用に次のdoc_type値を強制しなければならない：spec、plan、design_doc、tasks、api_contract、test_case、user_docs
3. システムはコード/アセット用に次のdoc_type値を強制しなければならない：source_code、build_script、infra_config、ci_pipeline、test_code
4. システムは次のcategory値を強制しなければならない：requirements_gap、spec_inconsistency、design_flaw、implementation_bug、security_issue、performance_issue、style_violation、test_deficiency、test_error、doc_deficiency、doc_error
5. システムは次のroot_cause値を強制しなければならない：spec_omission、design_decision_error、implementation_bug、test_deficiency、doc_deficiency
6. システムは次のseverity値を強制しなければならない：high、medium、low
7. システムは次のstatus値を強制しなければならない：Open、InProgress、Resolved、Verified、Deferred、Rejected
8. WHEN ユーザーが無効な分類値を入力しようとする THEN システムは送信を防止し、エラーメッセージを表示しなければならない

### 要件 6

**ユーザーストーリー:** GitHub Pagesで静的サイトとして動作することを望む。そうすることで、サーバーインフラなしでデプロイ・保守できる。

#### 受入基準

1. システムはサーバーサイド処理なしでHTML、CSS、JavaScriptファイルのみで構成されなければならない
2. システムは同じリポジトリに保存された静的JSONファイルからすべてのデータを読み込まなければならない
3. システムはGitHub Pagesへのデプロイにビルドプロセスを必要としてはならない
4. WHEN JSONファイルが更新される THEN システムはキャッシュ問題なく次のページ読み込み時に変更を反映しなければならない
5. システムはGitHub Pagesのサブディレクトリパスから提供される場合でも正しく機能しなければならない

### 要件 7

**ユーザーストーリー:** プロジェクトとレビュー指摘のデータを管理したい。そうすることで、データの永続化とポータビリティを実現できる。

#### 受入基準

1. システムはプロジェクトメタデータ、CI結果、効果のフィールドを持つ明確なJSONスキーマを定義しなければならない
2. システムはレビュー指摘のすべての分類フィールドとドキュメント参照を含む明確なJSONスキーマを定義しなければならない
3. WHEN ユーザーが新しいプロジェクトを追加する THEN システムは一意のプロジェクトIDを自動的に割り当て、即座にlocalStorageに保存しなければならない
4. WHEN ユーザーがプロジェクトを編集する THEN システムは即座にlocalStorageの該当プロジェクトを更新しなければならない
5. WHEN ユーザーがプロジェクトを削除する THEN システムは即座にlocalStorageから該当プロジェクトと関連するレビュー指摘とCI結果を削除しなければならない
6. WHEN ユーザーがエクスポートボタンをクリックする THEN システムはlocalStorageに保存されたすべてのデータ（プロジェクト、レビュー指摘）をJSON形式でダウンロードしなければならない
7. システムは初回アクセス時にlocalStorageが空の場合、サンプルデータを含むprojects.jsonとreview_log.jsonを読み込み、localStorageに保存しなければならない

### 要件 8

**ユーザーストーリー:** プロジェクトを追加・編集・削除したい。そうすることで、新しいプロジェクトの記録を開始し、既存プロジェクトの情報を更新できる。

#### 受入基準

1. WHEN ユーザーがプロジェクト追加ボタンをクリックする THEN システムは新規プロジェクト登録フォームを表示しなければならない
2. WHEN ユーザーが新規プロジェクトを送信する THEN システムはプロジェクト名、フレームワーク種別、日付を含むすべての必須フィールドを検証しなければならない
3. WHEN ユーザーが有効なプロジェクトを送信する THEN システムは一意のIDを割り当て、localStorageに保存し、一覧を更新しなければならない
4. WHEN ユーザーがプロジェクトの編集ボタンをクリックする THEN システムは既存データが入力された編集フォームを表示しなければならない
5. WHEN ユーザーがプロジェクトの削除ボタンをクリックする THEN システムは確認ダイアログを表示し、確認後にlocalStorageから削除しなければならない
6. システムはフレームワーク種別として任意の文字列を入力可能にしなければならない

### 要件 9

**ユーザーストーリー:** レビュー指摘を表示するユーザーとして、分類フィールドで指摘をフィルタ・ソートしたい。そうすることで、特定の種類の問題に集中できる。

#### 受入基準

1. WHEN ユーザーがレビュー指摘テーブルを表示する THEN システムはprocess、doc_type、category、severity、statusのフィルタコントロールを提供しなければならない
2. WHEN ユーザーがフィルタを適用する THEN システムは一致する指摘のみを表示するようにテーブルを更新しなければならない
3. WHEN ユーザーが列ヘッダーをクリックする THEN システムはその列で昇順または降順にテーブルをソートしなければならない
4. システムはユーザーがレビュー指摘タブ内を移動する間、フィルタとソート状態を維持しなければならない
5. WHEN ユーザーがすべてのフィルタをクリアする THEN システムは現在のプロジェクトのすべての指摘を表示しなければならない
